<div class="background-overlay"></div>
<div class="container">
  <h1>Dark Dungeon RPG Registration</h1>
  <form
    [formGroup]="registerForm"
    (ngSubmit)="$event.preventDefault(); submitForm()"
  >
    <div class="form-group">
      <label for="email">Contact Scroll (Email):</label>
      <input type="email" id="email" formControlName="email" required />
      <mat-progress-bar
        *ngIf="registerForm.get('email')?.pending"
        mode="indeterminate"
      ></mat-progress-bar>
      <div
        *ngIf="
          registerForm.get('email')?.invalid &&
          (registerForm.get('email')?.dirty ||
            registerForm.get('email')?.touched)
        "
      >
        <small
          class="text-danger"
          *ngIf="registerForm.get('email')?.hasError('required')"
        >
          Email address is required
        </small>
        <small
          class="text-danger"
          *ngIf="registerForm.get('email')?.hasError('email')"
        >
          Enter a valid email address
        </small>
        <small
          class="text-danger"
          *ngIf="registerForm.get('email')?.hasError('uniqueEmail')"
        >
          User with this email already exists
        </small>
      </div>
    </div>
    <div class="form-group">
      <label for="password">Secret Word (Password):</label>
      <input
        type="password"
        id="password"
        formControlName="password"
        required
      />
      <div
        *ngIf="
          registerForm.get('password')?.invalid &&
          (registerForm.get('password')?.dirty ||
            registerForm.get('password')?.touched)
        "
      >
        <small
          class="text-danger"
          *ngIf="registerForm.get('password')?.hasError('required')"
        >
          Password is required<br />
        </small>
        <small
          class="text-danger"
          *ngIf="registerForm.get('password')?.hasError('minlength')"
        >
          Password length must not be less than 8 symbols<br />
        </small>
        <small
          class="text-danger"
          *ngIf="registerForm.get('password')?.hasError('invalidPassword')"
        >
          Password should contain at least 1 special character and 1 numeric
          value
        </small>
      </div>
    </div>
    <div class="form-group">
      <label for="password">Repeat the Secret Word:</label>
      <input
        type="password"
        id="password"
        formControlName="confirmPassword"
        required
      />
      <div
        *ngIf="
          registerForm.get('confirmPassword')?.dirty ||
          registerForm.get('confirmPassword')?.touched
        "
      >
        <small
          class="text-danger"
          *ngIf="
            registerForm.errors?.['passwordMismatch']
          "
        >
          Passwords must match
        </small>
      </div>
    </div>
    <button type="submit">Remember me</button>
  </form>
  <div class="link-container">
    <a routerLink="/login">Already have an account? Return to the Realm</a>
  </div>
</div>
